Python多版本管理器-pyenv 介绍及部署记录

 

一. pyenv简单介绍

在日常运维中, 经常遇到这样的情况: 系统自带的Python是2.x，而业务部署需要Python 3.x 环境, 此时需要在系统中安装多个Python版本，但又不能影响系统自带的Python 版本,即需要实现Python的多版本环境共存, pyenv就是这样一个Python版本管理器, 可以同时管理多个python版本共存! 简单的说，pyenv 可以根据需求使用户在系统里安装和管理多个Python 版本：

- 配置当前用户的python的版本;

- 配置当前shell的python版本;

- 配置某个项目（目录及子目录）的python版本;

- 配置多个虚拟环境.

由于python的各种优点，当前学习及使用python的人越来越多, 学习python有一个不容忽视的问题就是python的版本问题! 到现在为止，python的版本有很多，但是问题在于python2与python3的区别。python3的对一些模块进行了改变，导致了python2写的代码有的不被python3兼容，从而导致程序运行报错。因此，在学习和工作中使用python的时候，最好是安装一个pyenv管理器, 多安装几个python版本进行管理, 然后再针对不同项目安装各自项目的python虚拟环境, 相互隔离, 这样便于使用和管理。

二. pyenv工作原理

pyenv是利用系统环境变量PATH的优先级，劫持python的命令到pyenv上，根据用户所在的环境或目录，使用不同版本的python。

|   |   |
| - | - |
| 1<br>2<br>3<br>4<br>5<br>6 | how it works：<br>At a high level, pyenv intercepts Python commands using shim executables injected into your PATH, determines which Python version<br>has been specified by your application, and passes your commands along to the correct Python installation.<br> <br>它是如何工作的：<br>在较高级别上，pyenv使用注入到PATH中的shim可执行文件拦截Python命令，确定应用程序指定了哪个Python版本，并将命令传递到正确的Python安装。 |


对于系统环境变量 PATH ，里面包含了一串由冒号分隔的路径，例如 /usr/local/bin:/usr/bin:/bin。每当在系统中执行一个命令时，例如 python 或 pip，操作系统就会在 PATH 的所有路径中从左至右依次寻找对应的命令。因为是依次寻找，因此排在左边的路径具有更高的优先级。在PATH 最前面插入一个 $(pyenv root)/shims 目录，$(pyenv root)/shims目录里包含名称为python以及pip等可执行脚本文件；当用户执行python或pip命令时，根据查找优先级，系统会优先执行shims目录中的同名脚本。pyenv 正是通过这些脚本，来灵活地切换至我们所需的Python版本。

三. pyenv安装和使用说明

1) pyenv安装

|   |   |
| - | - |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78 | [root@localhost ~]\# cat /etc/redhat-release<br>CentOS release 6.9 (Final)<br>   <br>系统默认是Python 2.6 版本<br>[root@localhost ~]\# python -V            <br>Python 2.6.6<br>   <br>1) 安装依赖环境<br>[root@localhost ~]\# yum -y install gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel git<br>   <br>2) 安装pyenv包<br>pyenv可以通过多种方式安装，可以参考项目在github上的Installtion, 地址为: https://github.com/pyenv/pyenv-installer<br>   <br>推荐采用The automatic installer的方式安装，可以一键安装pyenv的所有插件。<br>[root@localhost ~]\# curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash<br> <br>pyenv套件下插件：<br>- pyenv-doctor<br>- pyenv-installer<br>- pyenv-update<br>- pyenv-virtualenv<br>- pyenv-which-ext<br> <br>==================================================================================<br>温馨提示:<br>以上https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer的访问内容<br>, 可以将内容粘出来放在服务器的一个shell脚本文件中, 然后执行该脚本用以安装pyenv<br>      <br>该脚本下载地址:  https://pan.baidu.com/s/1wW9ylrmc4Q9wxu\_i3-1wYA<br>提取密码: rhtj<br>      <br>执行脚本进行安装(执行前授予755权限)<br>\# chmod 755 pyenv-installer<br>\# /bin/bash pyenv-installer<br>=================================================================================<br>   <br>分析一下上面的pyenv-installer脚本，可以发现在centos上，其实它做了以下事情:<br>git clone --depth 1"git://github.com/pyenv/pyenv.git"            "${HOME}/.pyenv"<br>git clone --depth 1"git://github.com/pyenv/pyenv-doctor.git"     "${HOME}/.pyenv/plugins/pyenv-doctor"<br>git clone --depth 1"git://github.com/pyenv/pyenv-installer.git"  "${HOME}/.pyenv/plugins/pyenv-installer"<br>git clone --depth 1"git://github.com/pyenv/pyenv-update.git"     "${HOME}/.pyenv/plugins/pyenv-update"<br>git clone --depth 1"git://github.com/pyenv/pyenv-virtualenv.git""${HOME}/.pyenv/plugins/pyenv-virtualenv"<br>git clone --depth 1"git://github.com/pyenv/pyenv-which-ext.git"  "${HOME}/.pyenv/plugins/pyenv-which-ext"<br>   <br>上面安装完成后，还需要执行下面的命令，将pyenv安装到系统环境变量中。<br>[root@localhost ~]\# ll -d /root/.pyenv<br>drwxr-xr-x 11 root root 4096 Dec 17 10:48 /root/.pyenv<br>   <br>在~/.bash\_profile文件底部添加下面三行内容，　让系统可以找到 pyenv 安装的 Python<br>[root@localhost ~]\# vim ~/.bash\_profile      <br>export PATH="/root/.pyenv/bin:$PATH"<br>eval "$(pyenv init -)"<br>eval "$(pyenv virtualenv-init -)"<br>   <br>使上面配置生效<br>[root@localhost ~]\# source ~/.bash\_profile<br>   <br>查看pyenv安装情况<br>[root@localhost ~]\# pyenv --version            //或者"pyenv -v"<br>pyenv 1.2.8<br>   <br>更新pyenv<br>[root@localhost ~]\# pyenv update<br>   <br>3) 卸载pyenv<br>先删除pyenv的安装目录,  这里即是/root/.pyenv<br>[root@localhost ~]\# rm -fr /root/.pyenv<br>   <br>接着删除~/.bash\_profile里面配置的系统环境变量<br>[root@localhost ~]\# vim ~/.bash\_profile　　　　　//删除下面三行<br>export PATH="/root/.pyenv/bin:$PATH"<br>eval "$(pyenv init -)"<br>eval "$(pyenv virtualenv-init -)"<br>   <br>[root@localhost ~]\# source ~/.bash\_profile<br>   <br>这样pyenv就被卸载了，　卸载pyenv后，　当前终端shell里会出现"-bash: pyenv: command not found"<br>的提示信息，　不过不影响使用．　再打开其他的终端窗口，　就不会出现该提示信息． |


2) pyenv使用

|   |   |
| - | - |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br>167<br>168<br>169<br>170<br>171<br>172<br>173<br>174<br>175<br>176<br>177<br>178 | 当前系统默认的Python版本<br>[root@localhost ~]\# python -V<br>Python 2.6.6<br>   <br>pyenv的命令，可以通过pyenv help查看<br>[root@localhost ~]\# pyenv help<br>Usage: pyenv &lt;command&gt; [&lt;args&gt;]<br>   <br>Some useful pyenv commands are:<br>   commands    List all available pyenv commands<br>   local       Set or show the local application-specific Python version<br>   global      Set or show the global Python version<br>   shell       Set or show the shell-specific Python version<br>   install     Install a Python version using python-build<br>   uninstall   Uninstall a specific Python version<br>   rehash      Rehash pyenv shims (run this after installing executables)<br>   version     Show the current Python version and its origin<br>   versions    List all Python versions available to pyenv<br>   which       Display the full path to an executable<br>   whence      List all Python versions that contain the given executable<br>   <br>See `pyenv help &lt;command&gt;' for information on a specific command.<br>For full documentation, see: https://github.com/pyenv/pyenv\#readme<br>   <br>使用 pyenv install --list 查看可以安装的python版本<br>[root@localhost ~]\# pyenv install --list<br>Available versions:<br>  2.1.3<br>  2.2.3<br>  .........<br>  2.7.4<br>  2.7.5<br>  .........<br>  3.0.1<br>  3.1<br>  .........<br>  3.6.1<br>  3.6.2<br>  .........<br>  3.7.1<br>  3.8-dev<br>   <br>查看当前pyenv可检测到的所有版本,处于激活状态的版本前以 \* 标示.<br>[root@localhost ~]\# pyenv versions<br>\* system (set by /root/.pyenv/version)<br>   <br>使用pyenv install  &lt;version&gt; 安装python，可以使用-v参数，查看安装过程。<br>如下, 分别安装三个版本的python<br>[root@localhost ~]\# pyenv install -v 2.7.5<br>[root@localhost ~]\# pyenv install -v 3.1<br>[root@localhost ~]\# pyenv install -v 3.6.1<br>   <br>查看当前pyenv可检测到的python版本 (即pyenv当前安装了哪些python版本)<br>[root@localhost ~]\# pyenv versions<br>\* system (set by /root/.pyenv/version)<br>  2.7.5<br>  3.1<br>  3.6.1<br>   <br>查看当前pyenv使用的python版本   (注意是version, 而不是上面的versions)<br>[root@localhost ~]\# pyenv version<br>system (set by /root/.pyenv/version)<br>   <br>配置及管理python版本<br>pyenv管理python版本的三个基础命令(即使用下面三个命令的途径进行python版本的切换和激活状态):<br>- pyenv global &lt;version&gt;     // 配置当前用户的系统使用的python版本. 可以使用这个命令进行python版本的切换!<br>- pyenv shelll &lt;version&gt;      // 配置当前shell的python版本，退出shell则失效<br>- pyenv local &lt;version&gt;      // 配置所在项目（目录）的python版本<br>   <br>特别注意:<br>在使用上面pyenv三个基础命令进行python版本切换后:<br>如果想要切回到系统默认的python版本, 也就是这里默认的python2.6.6, 则需要下面命令进行切回操作!!!!!!<br>[root@localhost p\_b]\# pyenv local system<br>[root@localhost p\_b]\# python -V      <br>Python 2.6.6<br>   <br>下面分别介绍下pyenv这三个基础命令切换python版本的操作<br>a) 使用pyenv global &lt;version&gt;配置当前用户的系统使用的python版本<br>[root@localhost ~]\# pyenv versions<br>\* system (set by /root/.pyenv/version)<br>  2.7.5<br>  3.1<br>  3.6.1<br>   <br>[root@localhost ~]\# python -V<br>Python 2.6.6<br>   <br>使用下面命令进行python版本的切换<br>[root@localhost ~]\# pyenv global 3.6.1<br>   <br>[root@localhost ~]\# pyenv versions<br>  system<br>  2.7.5<br>  3.1<br>\* 3.6.1 (set by /root/.pyenv/version)<br>   <br>[root@localhost ~]\# python -V<br>Python 2.6.6<br>   <br>需要执行下面命令进行数据库更新后, pyenv切换的python版本才会生效!<br>[root@localhost ~]\# pyenv rehash<br>   <br>[root@localhost ~]\# python -V      <br>Python 3.6.1<br>   <br>[root@localhost ~]\# which python<br>/root/.pyenv/shims/python<br> <br>=================================================================================<br>特别注意：如果使用"pyenv global xxx" 以及 "pyenv rehash" 后仍然无法成功切换版本！<br>这种情况一般是因为用pyenv指定了local版本！！<br>解决办法：取消设置local版本，即执行"pyenv local --unset"即可！<br>=================================================================================<br>   <br>b) 使用pyenv shelll &lt;version&gt;配置当前shell的python版本，退出shell则失效<br>[root@localhost ~]\# python -V<br>Python 3.6.1<br>[root@localhost ~]\# pyenv versions<br>  system<br>  2.7.5<br>  3.1<br>\* 3.6.1 (set by /root/.pyenv/version)<br>[root@localhost ~]\# pyenv shell 2.7.5<br>[root@localhost ~]\# python -V     <br>Python 2.7.5<br>   <br>如上设置后, 只在当前shell终端窗口有效, 退出重新登录 或 再打开另外一个窗口就不生效了 (即pytho版本还是之前的)<br>即使执行"pyenv rehash" 进行更新操作, 在别的shell窗口也是不生效的!<br>   <br>当前shell下，取消配置的使用python shell --unset；若退出此shell，配置也会失效。<br>[root@localhost ~]\# pyenv shell --unset<br>[root@localhost ~]\# python -V       <br>Python 3.6.1<br>   <br>c) 使用pyenv local &lt;version&gt;配置所在项目（目录）的python版本<br>新建一个文件夹~/project，在此文件夹下使用python local &lt;version&gt;<br>[root@localhost ~]\# python -V <br>Python 3.6.1<br>[root@localhost ~]\# mkdir project<br>[root@localhost ~]\# cd project/<br>[root@localhost project]\# pyenv local 3.1<br>[root@localhost project]\# pyenv versions<br>  system<br>  2.7.5<br>\* 3.1 (set by /root/project/.python-version)<br>  3.6.1<br>   <br>在当前项目目录下查看python版本<br>[root@localhost project]\# python -V<br>Python 3.1<br>   <br>新建目录~/project/p\_a,切换到~/project/p\_a,并查看版本<br>[root@localhost project]\# mkdir p\_a&amp;&amp; cd p\_a<br>[root@localhost p\_a]\# python -V<br>Python 3.1<br>   <br>[root@localhost p\_b]\# cd /root/<br>[root@localhost ~]\# python -V<br>Python 3.6.1<br>   <br>如上可知, 第三种命令操作后, 切换的python版本只能在当前所在项目目录下生效!<br>在其他目录下就不会生效了!!<br>  <br>=============================================<br>如果要想卸载掉pyenv安装的python版本, 就使用"pyenv uninstall &lt;version&gt;" 命令<br>[root@localhost ~]\# pyenv versions<br>  system<br>  2.7.5<br>  3.1<br>\* 3.6.1 (set by /root/.pyenv/version)<br>  <br>[root@localhost ~]\# pyenv uninstall 3.1<br>pyenv: remove /root/.pyenv/versions/3.1? y<br>  <br>[root@localhost ~]\# pyenv versions   <br>  system<br>  2.7.5<br>\* 3.6.1 (set by /root/.pyenv/version) |


接下来稍微深入的了解下pyenv是如何进行python版本管理的?

|   |   |
| - | - |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48 | 使用which命令，可以看到，python命令已经不是本来的python命令，而是shims中的脚本文件<br>[root@localhost ~]\# which python<br>/root/.pyenv/shims/python<br>[root@localhost ~]\# which python3               <br>/root/.pyenv/shims/python3<br>[root@localhost ~]\# which pip3                  <br>/root/.pyenv/shims/pip3<br> <br>查看~/.pyenv/shims/python<br>[root@localhost ~]\# cat /root/.pyenv/shims/python<br>\#!/usr/bin/env bash<br>set -e<br>[ -n "$PYENV\_DEBUG" ] &amp;&amp; set -x<br> <br>program="${0\#\#\*/}"<br>if [[ "$program" = "python"\* ]]; then<br>  for arg; do<br>    case "$arg" in<br>    -c\* | -- ) break ;;<br>    \*/\* )<br>      if [ -f "$arg" ]; then<br>        export PYENV\_FILE\_ARG="$arg"<br>        break<br>      fi<br>      ;;<br>    esac<br>  done<br>fi<br> <br>export PYENV\_ROOT="/root/.pyenv"<br>exec "/root/.pyenv/libexec/pyenv" exec "$program" "$@"<br> <br>可以看到python的命令最终被~/.pyenv/libexec/pyenv接管运行. 根据pyenv官方的解释, 大致了解到的意思是:<br>当使用的python命令被pyenv接管以后，到底使用哪个python版本，是由下面这些信息依次决定的：<br>1) 如果PYENV\_VERSION这个变量存在，则使用这个变量里的版本；这个变量是由pyenv shell &lt;version&gt;配置的；<br>2) 按照往父目录查找的顺序查找直到根目录，第一个被查找到的.python-version文件作为版本文件,其指定的版本作为使用的python版本；<br>    这个文件使用pyenv local &lt;version&gt;配置<br>3) $(pyenv root)/version 这个文件若存在，则使用这个文件里制定的版本作为python版本；若不存在，则使用系统的版本；<br>    这个文件使用pyenv global &lt;version&gt;配置<br>4) 如果以上变量或文件都没有找到，就按照系统默认制定的python版本了。<br> <br>另外，用户还可以在一个环境下同时配置多个版本的python；<br>回看一下上面pyenv versions命令，输出的结果中会有一个set by的提示，也向用户展示了，pyenv是基于什么指定的python版本。<br>[root@localhost ~]\# pyenv versions<br>  system<br>  2.7.5<br>  3.1<br>\* 3.6.1 (set by /root/.pyenv/version) |


四. python虚拟环境部署

|   |   |
| - | - |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124 | 为了对不同的项目进行隔离，使每个项目使用独立的python解释器及依赖，需要配置python虚拟环境.<br>每个项目都有一个单独的python虚拟环境, 这样项目之前的python环境相互隔离, 便于使用和管理!<br> <br>[root@localhost ~]\# pyenv versions    <br>  system<br>  2.7.5<br>\* 3.6.1 (set by /root/.pyenv/version)<br> <br>上面使用pyenv install安装的python版本，比如3.6.1<br>python3.6.1解释器安装的路径为~/.pyenv/versions/3.6.1/;<br>插件的安装的路径为~/.pyenv/versions/3.6.1/lib/python3.6/site-packages<br> <br>[root@localhost ~]\# ll -d /root/.pyenv/versions/3.6.1/<br>drwxr-xr-x 6 root root 4096 Dec 17 12:57 /root/.pyenv/versions/3.6.1/<br>[root@localhost ~]\# ll -d /root/.pyenv/versions/3.6.1/lib/python3.6/site-packages<br>drwxr-xr-x 8 root root 4096 Dec 17 12:57 /root/.pyenv/versions/3.6.1/lib/python3.6/site-packages<br> <br>使用pyenv-virtualenv创建python虚拟环境，实质上是在~/.pyenv/versions/3.6.1/下创建一个文件夹evns，存放该虚拟环境python的解释器；<br>并且在~/.pyenv/下创建一个软连接，该虚拟环境可以通过pyenv进行管理；<br> <br>1) 比如创建某个项目的python虚拟环境, 虚拟环境的命令为kevin\_py (名称随便起), 该虚拟环境的python版本是2.7.5<br>[root@localhost ~]\# pyenv virtualenv 2.7.5 kevin\_py<br> <br>查看, 发现在~/.pyenv/versions目录下会有一个kevin\_py虚拟环境的软连接<br>[root@localhost ~]\# ll ~/.pyenv/versions/<br>total 8<br>drwxr-xr-x 7 root root 4096 Dec 17 14:53 2.7.5<br>drwxr-xr-x 6 root root 4096 Dec 17 12:57 3.6.1<br>lrwxrwxrwx 1 root root   41 Dec 17 14:53 kevin\_py -&gt; /root/.pyenv/versions/2.7.5/envs/kevin\_py<br> <br>查看python虚拟环境<br>[root@localhost ~]\# pyenv virtualenvs<br>  2.7.5/envs/kevin\_py (created from /root/.pyenv/versions/2.7.5)<br>  kevin\_py (created from /root/.pyenv/versions/2.7.5)<br> <br>有四种方法用于切换到python虚拟环境<br> <br>1) 方法一  (推荐这一个切换方法)<br>[root@localhost ~]\# pyenv activate kevin\_py<br>pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV\_VIRTUALENV\_DISABLE\_PROMPT=1' to simulate the behavior.<br>(kevin\_py) [root@localhost ~]\#<br> <br>2) 方法二  (这种切换方法也推荐)<br>[root@localhost ~]\# source activate kevin\_py<br>pyenv-virtualenv: activate kevin\_py<br>pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV\_VIRTUALENV\_DISABLE\_PROMPT=1' to simulate the behavior.<br>(kevin\_py) [root@localhost ~]\# python -V<br>Python 2.7.5<br>(kevin\_py) [root@localhost ~]\#<br> <br>3) 方法三<br>[root@localhost ~]\# source /root/.pyenv/versions/2.7.5/envs/kevin\_py/bin/activate kevin\_py<br>(kevin\_py) [root@localhost ~]\# python -V<br>Python 2.7.5<br>(kevin\_py) [root@localhost ~]\#<br> <br>4) 方法三<br>[root@localhost ~]\# pyenv shell kevin\_py<br>(kevin\_py) [root@localhost ~]\# python -V<br>Python 2.7.5<br>(kevin\_py) [root@localhost ~]\#<br> <br>使用"source deactivate" 命令 或者 "pyenv deactivate"命令 退出python虚拟环境!!!!!!<br>退出后, 在python虚拟环境里部署的应用程序不受影响!<br>(kevin\_py) [root@localhost ~]\# source deactivate<br>pyenv-virtualenv: deactivate 2.7.5/envs/kevin\_py<br>[root@localhost ~]\#<br> <br>[root@localhost ~]\# pyenv activate kevin\_py<br>pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV\_VIRTUALENV\_DISABLE\_PROMPT=1' to simulate the behavior.<br>(kevin\_py) [root@localhost ~]\# pyenv deactivate<br>[root@localhost ~]\#<br> <br> <br>2) 再创建另一个项目的python虚拟环境, 虚拟环境的命令为bobo\_py, 该虚拟环境下的python版本为3.6.1<br>[root@localhost ~]\# pyenv virtualenv 3.6.1 bobo\_py<br> <br>[root@localhost ~]\# ll ~/.pyenv/versions/<br>total 8<br>drwxr-xr-x 7 root root 4096 Dec 17 14:53 2.7.5<br>drwxr-xr-x 7 root root 4096 Dec 17 15:00 3.6.1<br>lrwxrwxrwx 1 root root   40 Dec 17 15:00 bobo\_py -&gt; /root/.pyenv/versions/3.6.1/envs/bobo\_py<br>lrwxrwxrwx 1 root root   41 Dec 17 14:53 kevin\_py -&gt; /root/.pyenv/versions/2.7.5/envs/kevin\_py<br> <br>[root@localhost ~]\# pyenv virtualenvs<br>  2.7.5/envs/kevin\_py (created from /root/.pyenv/versions/2.7.5)<br>  3.6.1/envs/bobo\_py (created from /root/.pyenv/versions/3.6.1)<br>  bobo\_py (created from /root/.pyenv/versions/3.6.1)<br>  kevin\_py (created from /root/.pyenv/versions/2.7.5)<br> <br>先切换到bobo\_py虚拟环境<br>[root@localhost ~]\# pyenv activate bobo\_py<br>pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV\_VIRTUALENV\_DISABLE\_PROMPT=1' to simulate the behavior.<br>(bobo\_py) [root@localhost ~]\# python -V<br>Python 3.6.1<br>(bobo\_py) [root@localhost ~]\#<br> <br>然后再从bobo\_py环境环境切换到另一个虚拟环境kevin\_py<br>(bobo\_py) [root@localhost ~]\# source activate kevin\_py<br>pyenv-virtualenv: activate kevin\_py<br>pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV\_VIRTUALENV\_DISABLE\_PROMPT=1' to simulate the behavior.<br> <br>退出虚拟环境<br>(kevin\_py) [root@localhost ~]\# source deactivate<br>pyenv-virtualenv: deactivate 2.7.5/envs/kevin\_py<br>[root@localhost ~]\#<br> <br>注意: 上面介绍的四种虚拟环境的切换方法, 强烈建议采用第一种和第二种切换方法!<br>因为采用前两种切换方法进去后, 使用"source deactivate" 或者 "pyenv deactivate"命令可以正常退出来!<br>如果采用后两种切换方法进去后, 使用"source deactivate" 或者 "pyenv deactivate"命令退不出来!<br> <br>使用"pyenv virtualenv-delete"命令 删除虚拟环境<br>[root@localhost ~]\# pyenv virtualenvs<br>  2.7.5/envs/kevin\_py (created from /root/.pyenv/versions/2.7.5)<br>  3.6.1/envs/bobo\_py (created from /root/.pyenv/versions/3.6.1)<br>  bobo\_py (created from /root/.pyenv/versions/3.6.1)<br>  kevin\_py (created from /root/.pyenv/versions/2.7.5)<br> <br>[root@localhost ~]\# pyenv virtualenv-delete bobo\_py<br>pyenv-virtualenv: remove /root/.pyenv/versions/3.6.1/envs/bobo\_py? y<br> <br>[root@localhost ~]\# pyenv virtualenvs              <br>  2.7.5/envs/kevin\_py (created from /root/.pyenv/versions/2.7.5)<br>  kevin\_py (created from /root/.pyenv/versions/2.7.5) |


*************** 当你发现自己的才华撑不起野心时，就请安静下来学习吧！***************
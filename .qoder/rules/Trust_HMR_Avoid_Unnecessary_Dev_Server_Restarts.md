---
trigger: always_on
alwaysApply: true
---
在使用 Vite、Webpack Dev Server、Next.js 等现代前端开发服务器时，**必须信任其热模块替换（HMR）或 Fast Refresh 能力，禁止因“不确定是否生效”而频繁手动重启开发服务器**。

✅ 正确做法：
- 修改以下内容后，**无需重启**，页面会自动更新：
  - React/Vue 组件（JSX/TSX/SFC）
  - 样式文件（CSS/SCSS/Less）
  - 工具函数、Hooks、普通 JS/TS 模块
  - 静态资源（图片、JSON 等）
- 仅在以下情况才需重启开发服务器：
  - 修改 **Vite/Next/Webpack 配置文件**（如 `vite.config.ts`）
  - 更改 **环境变量文件**（如 `.env`，且未使用 `import.meta.env` 动态读取）
  - 安装/卸载 **新依赖**（部分插件需重启）
  - 修改 **TypeScript 配置**（`tsconfig.json`）影响类型检查时（但运行时代码通常仍热更新）
- 如果热更新未生效：
  1. 先检查控制台是否有 HMR 错误；
  2. 尝试手动保存相关文件触发重载；
  3. 查阅框架文档确认是否支持该类型模块的热更新；
  4. **最后才考虑重启**。

❌ 禁止行为：
- 每改一行代码就 Ctrl+C → `npm run dev`（极大降低开发效率）；
- 因“感觉没生效”就重启，而不先确认是否是缓存、浏览器刷新或 HMR 限制问题；
- 在团队中传播“Vite 不稳定，要常重启”的错误认知。

> ⚡ **现代前端开发的核心优势之一就是“秒级反馈”。滥用重启等于放弃这一优势。**